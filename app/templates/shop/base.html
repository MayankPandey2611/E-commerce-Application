<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>{% block title %}Shopping Hub{% endblock %}</title>
{% load humanize %}

<style>
/* ---------- RESET & VARIABLES ---------- */
:root{
  --primary:#2874f0;
  --dark:#1f2937;
  --light:#f9fafb;
  --gray:#6b7280;
  --radius:10px;
}

*{box-sizing:border-box;}
body{
  margin:0;
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  background:var(--light);
  color:var(--dark);
}

/* ---------- NAVBAR ---------- */
header{
  position:sticky;
  top:0;
  z-index:1000;
  background:var(--primary);
  color:#fff;
  box-shadow:0 4px 14px rgba(0,0,0,.15);
}

.navbar{
  max-width:1200px;
  margin:auto;
  display:flex;
  align-items:center;
  gap:16px;
  padding:12px 16px;
}

.brand{
  font-size:20px;
  font-weight:700;
  white-space:nowrap;
}

.brand a{color:#fff;text-decoration:none;}

.search-box{
  flex:1;
  display:flex;
  gap:8px;
}

.search-box input,
.search-box select{
  padding:10px;
  border:none;
  border-radius:6px;
  outline:none;
}

.search-box input{flex:1;}

.search-box button{
  padding:10px 14px;
  background:#ffe500;
  border:none;
  border-radius:6px;
  font-weight:600;
  cursor:pointer;
}

.nav-links{
  display:flex;
  align-items:center;
  gap:10px;
}

.nav-links a{
  color:#fff;
  text-decoration:none;
  padding:6px 12px;
  border-radius:6px;
  font-size:14px;
}

.nav-links a:hover{
  background:rgba(255,255,255,.2);
}

.badge{
  background:#fff;
  color:var(--primary);
  padding:2px 7px;
  border-radius:999px;
  font-weight:700;
  font-size:12px;
}

/* ---------- MOBILE NAV ---------- */
.menu-toggle{
  display:none;
  font-size:22px;
  cursor:pointer;
}

@media(max-width:900px){
  .search-box{display:none;}
}

@media(max-width:720px){
  .menu-toggle{display:block;}
  .nav-links{
    position:absolute;
    top:64px;
    right:16px;
    background:#fff;
    color:#000;
    flex-direction:column;
    align-items:stretch;
    padding:10px;
    border-radius:var(--radius);
    box-shadow:0 10px 30px rgba(0,0,0,.25);
    display:none;
  }
  .nav-links a{
    color:#000;
  }
  .nav-links.show{display:flex;}
}

/* ---------- PAGE CONTAINER ---------- */
.container{
  max-width:1200px;
  margin:auto;
  padding:16px;
}

/* ---------- CATEGORIES ---------- */
.categories{
  display:flex;
  gap:10px;
  flex-wrap:wrap;
  margin-bottom:20px;
}

.categories a{
  background:#fff;
  padding:8px 14px;
  border-radius:999px;
  text-decoration:none;
  color:var(--dark);
  font-size:14px;
  box-shadow:0 4px 10px rgba(0,0,0,.08);
}

.categories a:hover{
  background:var(--primary);
  color:#fff;
}

/* ---------- PRODUCT GRID ---------- */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(220px,1fr));
  gap:20px;
}

.card{
  background:#fff;
  border-radius:var(--radius);
  box-shadow:0 8px 20px rgba(0,0,0,.08);
  padding:14px;
  display:flex;
  flex-direction:column;
  transition:.25s;
}

.card:hover{
  transform:translateY(-5px);
  box-shadow:0 16px 30px rgba(0,0,0,.15);
}

.card img{
  width:100%;
  height:160px;
  object-fit:contain;
}

.card h4{
  font-size:15px;
  margin:10px 0 6px;
}

.price{
  font-weight:700;
  color:var(--primary);
}

.card button{
  margin-top:auto;
  padding:10px;
  background:var(--primary);
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

/* ---------- ALERTS ---------- */
.messages li{
  background:#e0f2fe;
  padding:10px;
  border-radius:6px;
  margin-bottom:10px;
}
</style>
</head>

<body>

<header>
  <div class="navbar">
    <div class="brand">
      <a href="{% url 'product_list' %}">ðŸ›’ Shopping Hub</a>
    </div>

    <form class="search-box" action="{% url 'product_list' %}" method="get">
      <input type="text" name="q" placeholder="Search productsâ€¦" value="{{ q|default:'' }}">
      <select name="sort">
        <option value="">Sort</option>
        <option value="new">Newest</option>
        <option value="price_asc">Price â†‘</option>
        <option value="price_desc">Price â†“</option>
      </select>
      <button type="submit">Search</button>
    </form>

    <div class="menu-toggle" onclick="toggleMenu()">â˜°</div>

    <nav class="nav-links" id="navMenu">
      {% if request.user.is_authenticated %}
        <span>Hi, {{ request.user.username }}</span>
        <a href="{% url 'logout' %}">Logout</a>
      {% else %}
        <a href="{% url 'login' %}">Login</a>
        <a href="{% url 'register' %}">Register</a>
      {% endif %}
      <a href="{% url 'cart' %}">Cart <span class="badge">{{ cart_count|default:0 }}</span></a>
      <a href="/admin/">Admin</a>
    </nav>
  </div>
</header>

<div class="container">

  <div class="categories">
    {% for c in categories %}
      <a href="{% url 'product_by_category' c.slug %}">{{ c.name }}</a>
    {% empty %}
      <em>No categories available</em>
    {% endfor %}
  </div>

  {% if messages %}
    <ul class="messages">
      {% for m in messages %}
        <li>{{ m }}</li>
      {% endfor %}
    </ul>
  {% endif %}

  {% block content %}{% endblock %}
</div>

<script>
function toggleMenu(){
  document.getElementById("navMenu").classList.toggle("show");
}
</script>

</body>
</html>
